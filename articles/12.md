# 12日目

## 11日目のおさらい :streamlit:
11日目では、condaによる仮想環境の構築とStreamlitライブラリのインストールを行いました。

もし、ターミナルを停止した場合は、次のようなコマンドで再度仮想環境を有効化しておきましょう。
なお、この操作は今後も行うように注意してください。

```sh
conda activate stenv
```

## 今回のワークで開発するアプリのコンセプト
今回のワークで開発していくアプリは、**クイズアプリ**です。このアプリは、ここまで学習してきたStremalitの基本的な機能を活用しながら、以下のようなポイントを新たに学習します。

- **マルチページ**：クイズアプリでは、ユーザー選択を行うトップページやクイズアプリ本体、結果表示ページなど複数のページを開発します。この構成を通じて、Streamlitにおけるマルチページ機能を体験します。
- **ページのスタイリング**：Streamlitでは、HTMLやCSSを全く意識することなくキレイなアプリケーションを構築できます。一方で、CSSを使ってスタイリングを行うこともできます。
- **セッションステート**：ユーザーの回答状況を、マルチページ間で保持するために、Streamlitのセッションステートという機能を利用します。Streamlitを活用する上で欠かせない概念を体験します。
- **エラー処理**：誤ったページ遷移や操作に対して、しっかりとエラーハンドリングを行います。

それでは、クイズアプリの開発を通じて、Streamlitを使ったWebアプリケーション開発の全体像をより深く学び、応用できるスキルを身に着けていきましょう！

## 12日目の内容
12日目では、上記であげた項目の内、**マルチページ**について学んでいきます。

### マルチページ

Streamlitのマルチページ機能は、アプリを複数のページに分けて整理する際に非常に便利な仕組みです。

以下のような特徴を有します。

- **アプリをページごとに分割できる**：アプリの構造を整理し、各ページに専用の機能やUIを割り当てることができます。
- **ナビゲーションが分かりやすくなる**：各ページはサイドバーから簡単に切り替えられるため、ユーザーが直感的に操作できます。
- **コードの管理が容易**：ページごとにコードを分割できるため、可読性が向上します。

百聞は一見にしかず、ということで、実際にアプリを開発していきましょう。

### 実装するファイル
12日目で実装するファイルは、次のようなものです。
```
root/
├── main.py
└── pages/
    └── quiz_a.py
```

Streamlitでマルチページを実装するには、最も単純に、トップページとなる`main.py`（エントリポイントファイルと言います）と、追加のページを構成できる`pages/`フォルダ配下の複数のスクリプトファイルを、上記のように配置するだけでOKです。これにより、自動的にマルチページを構成できます。


### main.py
まずは、トップページとなる`main.py`を開発していきます。
ここでは、マルチページアプリのトップページとして、ログイン処理を実装していきます。

といっても、これまで学習してきた内容とそこまで変わりありません。

まずは、下記を入力してみましょう。
```py:main.py
import streamlit as st

# ログインユーザーの取得処理
login_ids = ["🐈️", "🐋", "🐍"]
login_id = st.selectbox(
    "ログインするユーザーを選択しましょう！", options=login_ids, index=None
)
```

`st.selectbox`では、`login_ids`リストからユーザーの選択に応じて値を取得します。
`index=None`パラメータというのは、アプリ起動時にこのセレクトボックスに値を何も表示しないことができるパラメータです。ぜひ覚えておきましょう。


次に、`main.py`の続きに、ログイン処理を実装していきます。
```py:main.py
# ログイン処理
if login_id:
    if st.button("クイズに挑戦する"):
        st.switch_page("pages/quiz_a.py")
```

`login_id`が選択されると、「クイズに挑戦する」というボタンが表示されるようになります。ユーザーはこのボタンを押すと、`st.switch_page`関数により別のページに遷移するようになります。

以上で、`main.py`の実装はおしまいです。
それでは、早速アプリを起動してみましょう。アプリの起動は、次のようなコマンドで行えます。
```sh
streamlit run main.py
```

すると、自動的にブラウザでアプリケーションが表示されたことと思います。
それでは、アプリを操作してみてください。うまく動きましたか？・・・えっと、「クイズに挑戦する」ボタンを押したらエラーになった？

そうでした。ページ遷移後のアプリケーション作成がまだでしたね。それでは、最後にクイズアプリの箱だけ作成して本日はおしまいにしましょう。

### pages/quiz_a.py
マルチページとして機能させるために、`main.py`の隣に`pages`というフォルダを作成してください。

その中に、`quiz_a.py`というファイルを作成します。

今回は、仮として、次のような実装を行いましょう。

```py:pages/quiz_a.py
import streamlit as st

# クイズアプリを表示する
st.write("クイズA：以下のコードを実行すると何が表示されますか？")
```

実装できたら、再度実行してみましょう。
今後は、正しくクイズ画面に遷移しましたか？

そうであれば、本日の内容は以上となります！🎉
お疲れ様でした。

## 次回予告
13日目は、少しシンプルに実装した12日目のマルチページアプリを、カスタマイズしてみます。
ぜひお楽しみに！:santa: