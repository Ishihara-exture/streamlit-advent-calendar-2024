# 13日目

こんにちは！13日目を担当する[山口歩夢](https://x.com/Yamaguchi_aaaaa)です。

## 12日目のおさらい :streamlit:
13日目は、マルチページ機能のカスタマイズを行います！  
まずは、Streamlitのマルチページ機能の実装方法について、前回のおさらいをしましょう。 

Streamlitのマルチページ機能の実装は非常に簡単です。  
以下のように、メインとなるpyファイル(`main.py`)と同じ階層に`pages`ディレクトリを作成して、`pages`ディレクトリ内にPythonスクリプトを配置するだけです。

```
root/
├── main.py
└── /pages
     └── quiz_a.py
```

上記のようにディレクトリを用意するだけで、  
`pages`ディレクトリ直下のpyファイル名が、そのままサイドバーにマルチページリンクとして表示されます。
![Day13 サンプル1](app/static/day3_work2_example1.png "カスタマイズ前のマルチページ")

マルチページ機能を実装することで、アプリケーション内に別ページを作成できます。  
様々な機能やコンテンツを別ページに配置することで、アプリケーションの使いやすさを向上させることができます。  
13日目は、このマルチページ機能をアプリケーションユーザーがより使いやすいようにカスタマイズしていきます。   


## マルチページ機能のカスタマイズをしよう！
それでは、マルチページ機能のカスタマイズを行いましょう。  
具体的には、マルチページリンクの表示名を指定した名称に変更します。  
`st.page_link`を使用することで、以下のようにサイドバーのマルチページリンクの表示名をカスタマイズできます。

![Day13 サンプル2](app/static/day3_work2_example2.png "カスタマイズ後のマルチページ")

## 実装方法解説
まずは、メインとなるpyファイルと同じ階層に`sidebar.py`ファイルを追加し、`.streamlit`ディレクトリとその直下に`config.toml`を追加します。  
最終的なディレクトリ構成は以下の通りです。
```
root/
├── main.py
├── sidebar.py
├── /pages
|   └── quiz_a.py
└── /.streamlit
    └── config.toml
```

### コードの解説
それでは、用意したファイルに記述するコードについて解説していきます！

#### sidebar.py
こちらのファイルで、サイドバーに表示するマルチページリンクの表示名をカスタマイズします。
```py
import streamlit as st


# ページ選択（カスタマイズ版）をサイドバーに表示する
def display_page_links_sidebar():
    with st.sidebar:
        st.page_link("main.py", label="ユーザー選択", icon="🐱")
        st.page_link("pages/quiz_a.py", label="クイズA", icon="❓️")


def display_sidebar():
    display_page_links_sidebar()
```
  
`display_page_links_sidebar`関数は、サイドバー内にページリンクを表示するためのものです。  
関数内の処理としては、以下を行なっております。

まず、`with st.sidebar:`を用いて、リンクがサイドバー内に配置されるようにしています。  
その中で`st.page_link`を使用し、指定したファイルパスに対応するページリンクを作成します。  
`st.page_link`の第一引数にはリンク先のファイルパスを指定します。  
そして、`label`にはサイドバーに表示されるリンクの表示方法、`icon`にはページリンクの横に表示されるアイコンを指定します。  

一方、`display_sidebar`関数は、`display_page_links_sidebar`を呼び出すための関数です。  
`main.py`や`quiz_a.py`の冒頭で`display_sidebar`を呼び出すことで、  
どちらのページを開いている場合でもカスタマイズされたマルチページリンクがサイドバーに表示されるようになります。

すると、以下のように表示されます。  
サイドバーに日本語名がついたカスタマイズ済みのマルチページリンクが表示されます。

ただし、元々のPythonファイル名に基づくマルチページリンクも同時に表示されてしまいます。  
これでは意図したカスタマイズ後のリンクと元のリンクが両方表示され、冗長になってしまいます。  
最後に、元々のPythonファイル名のリンクを除去し、カスタマイズ後のマルチページリンクのみが表示されるように設定しましょう。

![Day13 サンプル2](app/static/day3_work2_example3.png "カスタマイズしたマルチページリンクを表示")


#### config.toml
それでは、不要なマルチページリンクを削除しましょう。  
最初に、`.streamlit`ディレクトリ直下に用意した`config.toml`ファイルに、以下のように追記することで、元々のマルチページリンクを削除できます。

```toml
[client]
showSidebarNavigation = false
```
これでマルチページ機能のカスタマイズが完了です！

![Day13 サンプル2](app/static/day3_work2_example2.png "カスタマイズ後のマルチページ")




## 次回予告

14日目には実際にクイズアプリの作成に取り掛かります！  
インタラクティブなクイズを簡単に実装できる方法を紹介しますので、楽しんでいただけると思います :santa:
